var nodeunit = require('../lib/nodeunit');
var httputil = require('../lib/utils').httputil;

exports.testHttpUtilBasics = function (test) {

    test.expect(6);
    
    httputil(function (req, resp) {
        test.equal(req.method, 'PUT');
        test.equal(req.url, '/newpair');
        test.equal(req.headers.foo, 'bar');
        
        resp.writeHead(500, {'content-type': 'text/plain'});
        resp.end('failed');
    }, function (server, client) {
        client.fetch('PUT', '/newpair', {'foo': 'bar'